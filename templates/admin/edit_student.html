{% extends "admin/base.html" %}

{% block title %}Edit Student{% endblock %}
{% block page_title %}Edit Student Profile{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow-md overflow-hidden">
    <form method="POST" enctype="multipart/form-data">
        <div class="p-6 space-y-6">
            <h3 class="text-xl font-semibold text-gray-800">Editing profile for: {{ student.first_name }} {{ student.last_name }}</h3>

            <!-- Read-only Info -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Student ID (Read-only)</label>
                    <input type="text" value="{{ student.student_id }}" readonly class="mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100 sm:text-sm">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Email (Read-only)</label>
                    <input type="email" value="{{ student.email }}" readonly class="mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100 sm:text-sm">
                </div>
            </div>

            <!-- Editable Info -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="first_name" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input type="text" name="first_name" id="first_name" value="{{ student.first_name }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="middle_name" class="block text-sm font-medium text-gray-700">Middle Name</label>
                    <input type="text" name="middle_name" id="middle_name" value="{{ student.middle_name or '' }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="last_name" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input type="text" name="last_name" id="last_name" value="{{ student.last_name }}" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="program" class="block text-sm font-medium text-gray-700">Program</Slabel>
                    <select name="program" id="program" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option value="BSIT" {% if student.program == 'BSIT' %}selected{% endif %}>BSIT</option>
                        <option value="BSIS" {% if student.program == 'BSIS' %}selected{% endif %}>BSIS</option>
                        <option value="BSCS" {% if student.program == 'BSCS' %}selected{% endif %}>BSCS</option>
                    </select>
                </div>
                <div>
                    <label for="semester" class="block text-sm font-medium text-gray-700">Semester</label>
                    <select name="semester" id="semester" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option value="1st" {% if student.semester == '1st' %}selected{% endif %}>1st</option>
                        <option value="2nd" {% if student.semester == '2nd' %}selected{% endif %}>2nd</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="year_level" class="block text-sm font-medium text-gray-700">Year Level</label>
                    <select name="year_level" id="year_level" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option value="1st Year" {% if student.year_level == '1st Year' %}selected{% endif %}>1st Year</option>
                        <option value="2nd Year" {% if student.year_level == '2nd Year' %}selected{% endif %}>2nd Year</option>
                        <option value="3rd Year" {% if student.year_level == '3rd Year' %}selected{% endif %}>3rd Year</option>
                        <option value="4th Year" {% if student.year_level == '4th Year' %}selected{% endif %}>4th Year</option>
                    </select>
                </div>
                <div>
                    <label for="section" class="block text-sm font-medium text-gray-700">Section</label>
                    <select name="section" id="section" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option value="A" {% if student.section == 'A' %}selected{% endif %}>A</option>
                        <option value="B" {% if student.section == 'B' %}selected{% endif %}>B</option>
                        <option value="C" {% if student.section == 'C' %}selected{% endif %}>C</option>
                        <option value="D" {% if student.section == 'D' %}selected{% endif %}>D</option>
                    </select>
                </div>
                <div>
                    <label for="major" class="block text-sm font-medium text-gray-700">Major (if applicable)</label>
                    <select name="major" id="major" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <option value="">None</option>
                        <option value="AMG" {% if student.major == 'AMG' %}selected{% endif %}>AMG</option>
                        <option value="NETAD" {% if student.major == 'NETAD' %}selected{% endif %}>NETAD</option>
                        <option value="WMAD" {% if student.major == 'WMAD' %}selected{% endif %}>WMAD</option>
                        <option value="SMP" {% if student.major == 'SMP' %}selected{% endif %}>SMP</option>
                    </select>
                </div>
            </div>

            <!-- File Uploads -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Update 1x1 Picture</label>
                    <input type="file" name="picture" accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    <p class="text-xs text-gray-500 mt-1">Current: <a href="{{ student.picture_url or '#' }}" target="_blank" class="text-blue-500 hover:underline">View Image</a></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Update Signature</label>
                    <input type="file" name="signature" accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    <p class="text-xs text-gray-500 mt-1">Current: <a href="{{ student.signature_url or '#' }}" target="_blank" class="text-blue-500 hover:underline">View Signature</a></p>
                </div>
            </div>

        </div>
        <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button type="submit" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                Save Changes
            </button>
            <a href="{{ url_for('admin_students') }}" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}
