{% extends "client/base.html" %}

{% block title %}Settings{% endblock %}
{% block page_title %}Settings{% endblock %}

{% block content %}

{% macro form_input(name, label, type='text', required=True) %}
<div>
    <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-1">{{ label }}</label>
    <input type="{{ type }}" name="{{ name }}" id="{{ name }}"
           {% if required %}required{% endif %}
           class="w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
</div>
{% endmacro %}

<div class="max-w-3xl mx-auto space-y-8">

    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <form method="POST" action="{{ url_for('core.change_password') }}">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-800">Change Password</h3>
                <p class="text-sm text-gray-500">Update your account password.</p>
            </div>

            <div class="p-6 space-y-4">
                {{ form_input('current_password', 'Current Password', type='password') }}
                {{ form_input('new_password', 'New Password', type='password') }}
                {{ form_input('confirm_new_password', 'Confirm New Password', type='password') }}
            </div>

            <div class="p-6 bg-gray-50 border-t border-gray-200 flex justify-end">
                <button type="submit" class="px-5 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">
                    Update Password
                </button>
            </div>
        </form>
    </div>

    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <form method="POST" action="{{ url_for('core.update_profile') }}">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-800">Change Email</h3>
                <p class="text-sm text-gray-500">Update your contact and login email.</p>
            </div>

            <div class="p-6 space-y-4">
                <div class="p-4 bg-yellow-100 text-yellow-800 rounded-lg">
                    <p class="text-sm font-medium"><i class="fas fa-exclamation-triangle mr-2"></i>You will need to verify your new email address.</p>
                </div>
                {{ form_input('new_email', 'New Email Address', type='email') }}
                {{ form_input('password_for_email', 'Current Password', type='password') }}
            </div>

            <div class="p-6 bg-gray-50 border-t border-gray-200 flex justify-end">
                <button type="submit" class="px-5 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition">
                    Update Email
                </button>
            </div>
        </form>
    </div>

</div>
{% endblock %}

{% block scripts %}
{% endblock %}